<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>闭包动画</title>
</head>
<style>
    div{
        position: absolute;
    }
</style>
<body>
    <div id="box1">first box</div>
    <div id="box2">second box</div>
</body>
<script>
    function animateIt(elementId){
        var elem = document.getElementById(elementId);
        
        var tick = 0;
        var timer = setInterval(function(){
            if(tick<100){
                elem.style.left = elem.style.top = tick+"px";
                tick++;
            }
            else{
                clearInterval(timer);
                assert(timer===10,"tick accessed via a closure");
                assert(elem,"elem accessed via closure");
                assert(timer,"Timer reference obtaned via a closure");
            }
        },100)//0.5s interval
    }
    animateIt("box1");
    animateIt("box2");
</script>
</html>